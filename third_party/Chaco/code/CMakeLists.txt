
cmake_minimum_required (VERSION 3.1)

project (Chaco)

set(LIB_NAME "Chaco")

set(CMAKE_CXX_STANDARD 11)

###########################################################
# Source files
###########################################################

set(SRC_FILES
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/assign.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/assign_out.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/mapper.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/median.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/merge_assign.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/rec_median.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/rotate.c
        ${CMAKE_CURRENT_SOURCE_DIR}/assign/y2x.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/checkbp.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/genvals2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/genvals3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/inits2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/inits3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/map2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/map3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/movevtxs.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/sorts2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch/sorts3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/coarsen.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/coarsen1.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/countcedges.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/interpolate.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/makeccoords.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/makecgraph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/makecgraph2.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/makefgraph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/makev2cv.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/maxmatch.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/maxmatch1.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/maxmatch2.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/maxmatch3.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/maxmatch4.c
        ${CMAKE_CURRENT_SOURCE_DIR}/coarsen/maxmatch5.c
        ${CMAKE_CURRENT_SOURCE_DIR}/connect/add_edges.c
        ${CMAKE_CURRENT_SOURCE_DIR}/connect/connected.c
        ${CMAKE_CURRENT_SOURCE_DIR}/connect/find_edges.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/bidir.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/bisect.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/checkeig.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/checkeig_ext.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/checkorth.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/cksturmcnt.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/eigensolve.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/get_extval.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/get_ritzvals.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanczos_ext.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanczos_ext_float.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanczos_FO.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanczos_SO.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanczos_SO_float.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanc_seconds.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/lanpause.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/makeorthlnk.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/mkeigvecs.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/mkscanlist.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/orthog1.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/orthogonalize.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/orthogvec.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/ql.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/rqi.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/rqi_ext.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/scale_diag.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/scanmax.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/scanmin.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/solistout.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/sorthog.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/splarax.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/sturmcnt.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/Tevec.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/tri_solve.c
        ${CMAKE_CURRENT_SOURCE_DIR}/eigen/warnings.c
        ${CMAKE_CURRENT_SOURCE_DIR}/graph/check_graph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/graph/free_graph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/graph/graph_out.c
        ${CMAKE_CURRENT_SOURCE_DIR}/graph/reformat.c
        ${CMAKE_CURRENT_SOURCE_DIR}/graph/subgraph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/eigenvec2.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/eigenvec3.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/inertial.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/inertial1d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/inertial2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/inertial3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/inertial/make_subgeom.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/check_input.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input_assign.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input_geom.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input_graph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input_graph_normal.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input_graph_scotch.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/input_graph_vis.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/read_params.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/read_val.c
        ${CMAKE_CURRENT_SOURCE_DIR}/input/reflect_input.c
        ${CMAKE_CURRENT_SOURCE_DIR}/internal/check_internal.c
        ${CMAKE_CURRENT_SOURCE_DIR}/internal/force_internal.c
        ${CMAKE_CURRENT_SOURCE_DIR}/internal/improve_internal.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/bilistops.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/buckets.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/buckets1.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/buckets_bi.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/coarsen_kl.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/compress_ewgts.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/count_weights.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/klspiff.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/kl_init.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/kl_output.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/make_bndy_list.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/make_kl_list.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klspiff/nway_kl.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/bpm_improve.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/bucketsv.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/clear_dvals.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/coarsen_klv.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/countup_vtx_sep.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/find_bndy.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/flatten.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/flow.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/klvspiff.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/klv_init.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/make_bpgraph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/make_sep_list.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/matching.c
        ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff/nway_klv.c
        ${CMAKE_CURRENT_SOURCE_DIR}/main/ChacoWrapper.c
        ${CMAKE_CURRENT_SOURCE_DIR}/main/interface.c
        ${CMAKE_CURRENT_SOURCE_DIR}/main/main.c
        ${CMAKE_CURRENT_SOURCE_DIR}/main/user_params.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/count.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/countup.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/countup_cube.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/countup_mesh.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/define_subcubes.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/define_submeshes.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/divide_procs.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/find_maxdeg.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/make_maps.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/make_setlists.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/make_subgoal.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/make_term_props.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/merge_goals.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/perturb.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/sequence.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/simple_part.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/time_kernels.c
        ${CMAKE_CURRENT_SOURCE_DIR}/misc/timing.c
        ${CMAKE_CURRENT_SOURCE_DIR}/optimize/determinant.c
        ${CMAKE_CURRENT_SOURCE_DIR}/optimize/func2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/optimize/func3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/optimize/opt2d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/optimize/opt3d.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/compute_cube_edata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/compute_cube_vdata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/compute_mesh_edata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/compute_mesh_vdata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/find_edge_cube.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/find_edge_mesh.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/init_cube_edata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/init_mesh_edata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/make_comm_graph.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/refine_cube.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/refine_map.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/refine_mesh.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/update_cube_edata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/update_cube_vdata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/update_mesh_edata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_map/update_mesh_vdata.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_part/kl_refine.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_part/make_maps_ref.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_part/make_terms_ref.c
        ${CMAKE_CURRENT_SOURCE_DIR}/refine_part/refine_part.c
        ${CMAKE_CURRENT_SOURCE_DIR}/submain/balance.c
        ${CMAKE_CURRENT_SOURCE_DIR}/submain/divide.c
        ${CMAKE_CURRENT_SOURCE_DIR}/submain/submain.c
        ${CMAKE_CURRENT_SOURCE_DIR}/symmlq/aprod.c
        ${CMAKE_CURRENT_SOURCE_DIR}/symmlq/msolve.c
        ${CMAKE_CURRENT_SOURCE_DIR}/symmlq/pow_dd.c
        ${CMAKE_CURRENT_SOURCE_DIR}/symmlq/symmlq.c
        ${CMAKE_CURRENT_SOURCE_DIR}/symmlq/symmlqblas.c
        ${CMAKE_CURRENT_SOURCE_DIR}/tinvit/epslon.c
        ${CMAKE_CURRENT_SOURCE_DIR}/tinvit/pythag.c
        ${CMAKE_CURRENT_SOURCE_DIR}/tinvit/tinvit.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/affirm.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/array_alloc_2D.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/bail.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/bit_reverse.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/checkpnt.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/cpvec.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/dot.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/doubleout.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/gray.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/input_int.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/machine_params.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/makevwsqrt.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/mergesort.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/mkvec.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/norm.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/normalize.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/randomize.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/scadd.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/seconds.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/setvec.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/shell_sort.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/smalloc.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/strout.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/tri_prod.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/true_or_false.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/update.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/vecout.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/vecran.c
        ${CMAKE_CURRENT_SOURCE_DIR}/util/vecscale.c
   )

###########################################################
# Library
###########################################################

add_definitions(-DLIBRARY_MODE)
add_LIBRARY(${LIB_NAME} STATIC ${SRC_FILES})

target_include_directories(${LIB_NAME} PUBLIC
                           ${CMAKE_CURRENT_SOURCE_DIR}/main
                           ${CMAKE_CURRENT_SOURCE_DIR}/assign
                           ${CMAKE_CURRENT_SOURCE_DIR}/bpmatch
                           ${CMAKE_CURRENT_SOURCE_DIR}/coarsen
                           ${CMAKE_CURRENT_SOURCE_DIR}/connect
                           ${CMAKE_CURRENT_SOURCE_DIR}/eigen
                           ${CMAKE_CURRENT_SOURCE_DIR}/graph
                           ${CMAKE_CURRENT_SOURCE_DIR}/inertial
                           ${CMAKE_CURRENT_SOURCE_DIR}/input
                           ${CMAKE_CURRENT_SOURCE_DIR}/internal
                           ${CMAKE_CURRENT_SOURCE_DIR}/klspiff
                           ${CMAKE_CURRENT_SOURCE_DIR}/klvspiff
                           ${CMAKE_CURRENT_SOURCE_DIR}/mainmatlab
                           ${CMAKE_CURRENT_SOURCE_DIR}/misc
                           ${CMAKE_CURRENT_SOURCE_DIR}/optimize
                           ${CMAKE_CURRENT_SOURCE_DIR}/refine_map
                           ${CMAKE_CURRENT_SOURCE_DIR}/refine_part
                           ${CMAKE_CURRENT_SOURCE_DIR}/submain
                           ${CMAKE_CURRENT_SOURCE_DIR}/symmlq
                           ${CMAKE_CURRENT_SOURCE_DIR}/tinvit
                           ${CMAKE_CURRENT_SOURCE_DIR}/util)

target_link_libraries(${LIB_NAME})
